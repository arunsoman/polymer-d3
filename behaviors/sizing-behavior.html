<script>
  PolymerD3.sizingBehavior = {
    properties: {
        area: {
            type: Array
        }
    },
    observers: ['_areaChanged(settings.area.*)'],

    ready: function() {
        this.area = [
            {
                input: 'height',
                txt: 'Height of the chart',
                uitype: 'Number',
                selectedValue: 500
            }, {
                input: 'width',
                txt: 'Width of the chart',
                uitype: 'Number',
                selectedValue: 960
            }, {
                input: 'marginTop',
                txt: 'Top  margin',
                uitype: 'Number',
                selectedValue: 40
            }, {
                input: 'marginRight',
                txt: 'Right margin',
                uitype: 'Number',
                selectedValue: 10
            }, {
                input: 'marginBottom',
                txt: 'Bottom margin',
                uitype: 'Number',
                selectedValue: 20
            }, {
                input: 'marginLeft',
                txt: 'Left margin',
                uitype: 'Number',
                selectedValue: 50
            }
        ];
    },

    attached: function() {
        // var me = this;
        // this.makeChartWrap();
        // if (!this.svgs) {
        //     this.svgs = [];
        // }
        // this.svgs.push(me.svg);
        // var margin = me.getMargins();
        // this.svgs.forEach(function(svg) {
            
        // });
        // Parent SVG


    },

    _areaChanged:function(area){
        var me = this;
        this.debounce('areaRedraw', function() {
            if (area.path === 'settings.area') {
                return false;
            }
            var chartDiv = me.querySelector('#chart');
            var margin = me.getMargins();
            chartDiv.style.height = me._getHeight() + "px";
            chartDiv.style.width = me._getWidth() + "px";
            var g = chartDiv.querySelector('svg > g');
            // g.setAttribute('transform', 'translate(' + margin.left + ',' + margin.top + ')');
        }, 1000);
    },
    _getHeight: function() {
        return parseInt(this.area[0]['selectedValue']);
    },
    _getWidth: function() {
        return parseInt(this.area[1]['selectedValue']);
    },
    alignAxis: function(axis, alignment) {
        var height = this._getHeight();
        var width = this._getWidth();
        var margin = this.getMargins();
        switch(alignment) {
            case 'top':
                this.svg.select('g')
                    .append('g')
                    .attr('class', 'axis axis--' + alignment)
                    .call(axis);
                break;
            case 'bottom':
                debugger;
                this.svg.select('g')
                    .append('g')
                    .attr('class', 'axis axis--' + alignment)
                    .attr('transform', 'translate(0,' + (height - (margin.top + margin.bottom)) + ')')
                    .call(axis);
                break;
            case 'left':
                this.svg.select('g')
                    .append('g')
                    .attr('class', 'axis axis--' + alignment)
                    .call(axis);
                break;
            case 'right':
                this.svg
                    .select('g').append('g')
                    .attr('class', 'axis axis--' + alignment)
                    .attr('transform', 'translate(0,' + (width - (margin.left + margin.right)) + ')')
                    .call(axis);
                break;
        }
    },
    getMargins: function() {
        return {
            top: parseInt(this.area[2]['selectedValue']),
            right: parseInt(this.area[3]['selectedValue']),
            bottom: parseInt(this.area[4]['selectedValue']),
            left: parseInt(this.area[5]['selectedValue'])
        }
    }
  }
</script>