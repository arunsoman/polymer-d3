<script>
  PolymerD3.axisBehavior = {
    createAxis: function(scaleType, align, format, position, barPadding, label){
      var margin = this.getMargins();
      var width = this._getWidth();
      var height = this._getHeight();
      if (!barPadding) {
        barPadding = .1;
      }
      var map = {
        'linear': d3.scale.linear().range((align==='v')? 
            [this.chartHeight,0]: 
            [0, this.chartWidth]),
        'time': d3.time.scale().range((align==='v')? 
            [this.chartHeight,0]: 
            [0, this.chartWidth]),
        'category': d3.scale.ordinal().rangeRoundPoints((align==='v')?
           [this.chartHeight, 0]:
           [0, this.chartWidth], barPadding)
      };
      var scale = map[scaleType];
      
      var axisG = this.parentG.append("g");
      axisG.attr("class", align + " axis");
      switch(position){
        case 'top':
          break;
        case 'left':
          break;
        case 'right':
            axisG.attr("transform", "translate(" + this.chartWidth + ", 0)");
          break;
        case 'bottom':    
            axisG.attr("transform", "translate(0," + this.chartHeight + ")");
          break;
      }
      if(label){
        axisG.append("text")
        .attr("class", "label")
        .attr("transform", (align === 'v')? "rotate(-90)": "rotate(0)")
        .attr("y", (align === 'v')?6:-6)
        .attr("x", (align === 'v')?0:this.chartWidth)
        .attr("dy", ".71em")
        .style("text-anchor", "end")
        .text(yInput);
      }

      var scale = map[scaleType];
      var axis = d3.svg.axis().orient(position);

      if(format && scaleType !== 'category'){
        switch(format){
          case  "number":
            axis.tickFormat(d3.format('.2s'));
          break;
          case  "currency":
            axis.tickFormat(d3.format('$.2s'));
          break;
          case  "percent":
            axis.tickFormat(d3.format('.0%'));
          break;
          case "category":
            axis.tickFormat(d3.requote("**"));
          break;
        }
      }
      if(format === 'category'){
        scale.rangeRoundBands((align==='v')? 
          [this.chartHeight, 0]:
          [0, this.chartWidth], barPadding);
      }
      axis.scale(scale);
      axisG.call(axis);
      return axis;
    },

    applyTimeTickFormate: function(axis, bound){
      if (bound) {
          if (d3.timeYear.count(bound[0], bound[1]) < 10) {
              if (d3.timeMonth.count(bound[0], bound[1]) < 10) {
                  if (d3.timeWeek.count(bound[0], bound[1]) < 10) {
                      //todo
                      if (d3.timeDay.count(bound[0], bound[1]) < 10) {
                          if (d3.timeHour.count(bound[0], bound[1]) < 240)  {
                            if (((d3.time.format('%H:%M')(bound[0])) === '00:00') && ((d3.time.format('%H:%M')(bound[1])) === '00:00')) {
                                axis.tickFormat(d3.time.format('%d-%b'));
                              } else{
                                axis.tickFormat(d3.time.format('%a-%I-%M'));
                              }
                          } else {
                            axis.tickFormat(d3.time.format('%d-%b'));
                          }
                       } else {
                          axis.tickFormat(d3.time.format('%d-%b'));
                       }
                     // axis.tickFormat(d3.time.format('%d-%b'));
                  }
              } else {
                  axis.tickFormat(d3.time.format('%a-%b'));
              }
          } else {
              axis.tickFormat(d3.time.format('%b-%Y'));
          }
      }
    }
  }
</script>
