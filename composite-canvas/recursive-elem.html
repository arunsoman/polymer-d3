<link rel="import" href="inner-layout-div.html">
<dom-module id="recursive-elem">
  <template>
    <style>
      vaadin-split-layout{
        height: 100%;
      }
      .splitter-handle{
        min-height: 1px;
        min-width: 1px;
      }
      .splitter-handle.non-vertical{
        height: 100%;
      }
      .splitter-handle.vertical {
          width: 100%;
      }
      .customStyle{
        --vaadin-split-layout-splitter: {
          min-width: 1px;
          min-height: 1px;
          border: solid 1px transparent;
          background-clip: content-box;
          fill: none;
        };
      }

    </style>
    <vaadin-split-layout  vertical="[[vertical]]" id="[[id]]_vaadin" class="customStyle">
      <div class$="[[getSplitterHandleClass(vertical)]]" on-track="getOnTrack">&nbsp;</div>
      <template is="dom-repeat" items="{{splitData}}">
        <inner-layout-div uuid="[[uuid]]" freeze="{{freeze}}" child-source="{{item.children}}" id="[[item.id]]" item-obj="[[item]]" track-Width="[[trackWidth]]" track-chart-obj="{{trackChartObj}}"></inner-layout-div>
      </template>
    </vaadin-split-layout>
  </template>
  <script>
  class recursiveElem extends Polymer.Element{
    static get is(){
      return "recursive-elem"
    }
    static get properties(){
      return {
        timer:{
          type:Number
        },
        trackWidth:{
          type:Boolean
        },
        trackChartObj:{
          type:Object,
          value:()=>{
            let trackChartObj = {trackChartId:[] ,trackChartIdChk:true}
            return trackChartObj
          }
        }

      }
    }
    constructor(){
      super()
    }
    connectedCallback(){
      super.connectedCallback()
    }
    getOnTrack(){
      clearTimeout(this.timer)
      this.timer = setTimeout(()=>{
        this.set("trackWidth",!this.trackWidth)
      },500)
    }
    getSplitterHandleClass(vertical){
      let styleClass = "splitter-handle"
      let addClass = vertical?" vertical":" non-vertical"
      styleClass = styleClass+addClass
      return styleClass
    }
  }
  customElements.define(recursiveElem.is, recursiveElem)

  </script>
</dom-module>
