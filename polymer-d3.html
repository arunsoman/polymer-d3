<link rel="import" href="display-component/chart-selector.html">
<link rel="import" href="display-component/chart-selector.html">
<link rel="import" href="display-component/settings-component.html">
<link rel="import" href="display-component/legends-component.html">
<link rel="stylesheet" href="polymer-d3-global.css">
<dom-module id="polymer-d3">
  <template>
    <style>
      :host {
        display: block;
      }
      .tool-bar {
        position: relative;
      }
      .settings-icon {
        position: absolute;
        right: 0;
        top: 0;
      }
    </style>
    <template is="dom-if" if="{{editMode}}" restamp>
      <div class="tool-bar">
        <chart-selector
          charts="[[availableCharts]]"
          selected="{{selectedChart}}"
        ></chart-selector>
        <paper-icon-button
          class="settings-icon"
          icon="icons:settings"
          title="Settings"
          on-tap="showSettings"
        ></paper-icon-button>
      </div>
    </template>
    <template is="dom-if" if="{{settingsVisible}}" restamp>
      <draggable-input externals="[[externals]]" inputs="{{inputs}}"></draggable-input>
      <display-component settings="{{settings}}"></display-component>
      <template is="dom-if" if="{{legendSettingsFlag}}" restamp>
        <legends-component opener="{{legendSettingsFlag}}" settings="{{legendSettings}}"></legends-component>
      </template>
    </template>
    <div class="chartHolder"></div>
  </template>
  <script src="polymer-d3.js"></script>
</dom-module>
