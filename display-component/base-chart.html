<link href="../behaviors/redux-mixins-behavior.html" rel='import'>
<link rel="import" href="chart-setting.html"/>
<dom-module id="base-chart">
<template>
  <h3>[[settings.title]]</h3>
</template>
<script>

  class baseChart extends ReduxMixinBehavior(Polymer.Element){
    static get is(){ return 'base-chart'}

    static get properties(){
      return{
        redrawChk:{
          type:Boolean
        },
        uuid:{
          type:String
        },
        xAxis:{
          type:String
        },
        yAxis:{
          type:String
        },
        settings:{
          type:Object,
          value:{
            title:"base-chart",
            marginTop:"",
            marginBottom:"",
            marginLeft:"",
            marginRight:"",
            legendPosition:"",
            legendColor:"",
            width:"",
            height:""
          }
        },
        inputs:{
          type:Array,
          statePath(state){
            var chartPath = state.charts[this.uuid]
            return chartPath ? chartPath['inputs']:[]
          },
          readOnly:true
        }
      }
    }
    static get observers(){
      return["_chartDraw(inputs)"]
    }

    constructor(){
      super();//baseChart
      this.initializeChart()
      //barChart.draw(data);
    }
    static get actions() {
      return {
        updateChart(chartProperies) {
          return {
            type: 'UPDATE_CHART',
            value: chartProperies
          };
        }
      };
    }
    connectedCallback(){
      super.connectedCallback()
      //this.dispatch("updateExternal",self.externals)

    }
    _chartDraw(inputs){
      // debugger
      if(inputs && inputs.length){
        this.attached()
      }
    }
    draw(compute,paint){
      this.debounce(paint(compute()),250)
    }
    initializeChart(){
        this.set("uuid",PolymerD3.utilities.getUUID())
    }


  }
  customElements.define(baseChart.is,baseChart)

</script>
</dom-module>
