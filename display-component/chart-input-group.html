<link rel="import" href="chart-input.html"/>
<link rel="import" href="drag-element.html"/>
<link href="../behaviors/redux-mixins-behavior.html" rel='import'>
<dom-module id="chart-input-group">
  <template>
    <style>
    .input-drag-wrapper{
      padding: 1em;
    }
    :host{
        position: relative;
        overflow: hidden;
        background: #2f3238;
        border-bottom: solid 1px #c71503;
        display: block;
        overflow: hidden;
        text-align: center;
    }
    .input-drag-wrapper{
      padding: 1em;
    }
    #inputItems{
      background: #cc6055;
    }

    </style>

    <!-- <div uuid = [[getUUID]]></div> -->
    <div class="input-drag-wrapper">
      <template is="dom-repeat" items="[[ externals ]]">
        <drag-element item="[[item]]" draggable="true"  data-index$="[[item.value]]"></drag-element>
      </template>
    </div>

    <div id="inputItems">
      <slot name="chart-input"></slot>
    </div>

  </template>
<script>
const initialExt = [{
  key: 'Q1',
  type: 'Number',
  value: 0
}, {
  key: 'Q2',
  type: 'Number',
  value: 1
}, {
  key: 'Q3',
  type: 'Number',
  value: 2
}, {
  key: 'Q4',
  type: 'Number',
  value: 3
}]
const initialsource = [
  [
    20000,
    15000,
    8000,
    20000
  ],
  [
    9879,
    9323,
    3294,
    5629
  ],
  [
    5070,
    9395,
    17633,
    5752
  ],
  [
    7343,
    8675,
    12121,
    7557
  ],
  [
    9136,
    5354,
    4319,
    5125
  ],
  [
    7943,
    6725,
    18712,
    5116
  ],
  [
    10546,
    10899,
    17270,
    5828
  ],
  [
    9385,
    9365,
    13676,
    6014
  ],
  [
    8669,
    8238,
    6587,
    5995
  ],
  [
    4000,
    7446,
    16754,
    8905
  ],
  [
    1000,
    2500,
    5000,
    6500
  ],
  [
    10000,
    20000,
    30000,
    40000
  ],
  [
    7450,
    10458,
    15734,
    25845
  ],
  [
    1234,
    4567,
    6789,
    9056
  ]
]

    class chartInputGroup extends ReduxMixinBehavior(Polymer.Element) {
        static get is() {
            return 'chart-input-group';
        }
        static get properties(){
          return{
            externals:{
              type:Array,
              statePath(state){
                return state.externals
              }
            },
            source:{
              type:Array,
              statePath(state){
                return state.source
              }
            }//,
            // inputs:{
            //   type:Array,
            //   statePath(state){
            //     return state.charts[this.uuid]['inputs']
            //   }
            // },
            // inputObj:{
            //   type:Object,
            //   value:{}
            // }

          }
        }
        static get actions() {
          return {
            updateExternal(externals) {
              return {
                type: 'UPDATE_EXTERNALS',
                value: externals
              };
            },
            updateSource(source) {
              return {
                type: 'UPDATE_SOURCE',
                value: source
              };
            }
          }
        }
        constructor() {
            super();
        }
        connectedCallback(){
          super.connectedCallback()
          this._initializeData()
        }
        _initializeData(){
          this.dispatch("updateSource",initialsource)
          this.dispatch("updateExternal",initialExt)
        }
    }
    customElements.define(chartInputGroup.is, chartInputGroup)
</script>
</dom-module>
